<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: os-x | SushiHangover]]></title>
  <link href="http://sushihangover.github.io/blog/categories/os-x/atom.xml" rel="self"/>
  <link href="http://sushihangover.github.io/"/>
  <updated>2016-09-25T12:56:05-07:00</updated>
  <id>http://sushihangover.github.io/</id>
  <author>
    <name><![CDATA[RobertN]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Sharpen - Part 2]]></title>
    <link href="http://sushihangover.github.io/sharpen-part-2/"/>
    <updated>2016-09-25T12:33:03-07:00</updated>
    <id>http://sushihangover.github.io/sharpen-part-2</id>
    <content type="html"><![CDATA[<h2>Sharpen Setup</h2>

<h3>Get Maven:</h3>

<pre><code>brew install maven
</code></pre>

<h3>Check Maven:</h3>

<pre><code>mvn --version

Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T08:41:47-08:00)
Maven home: /usr/local/Cellar/maven/3.3.9/libexec
Java version: 1.8.0_92, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_92.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "mac os x", version: "10.11.6", arch: "x86_64", family: "mac"
</code></pre>

<h3>Clone the repo(s):</h3>

<pre><code>git clone https://github.com/mono/sharpen.git
git clone https://github.com/ydanila/sharpen_imazen_config.git
</code></pre>

<h3>Set your Java/JDK version to 1.7</h3>

<ul>
<li><a href="http://sushihangover.github.io/sharpen/">http://sushihangover.github.io/sharpen/</a></li>
</ul>


<h3>Build the Sharpen config:</h3>

<pre><code>pushd sharpen_imazen_config
mvn install
popd
</code></pre>

<p>Note: This is a sample config and a great starting point</p>

<h3>Build Sharpen</h3>

<h5>Note: Make sure that you are on the develop branch of Sharpen!</h5>

<pre><code>pushd sharpen
git checkout develop 
</code></pre>

<h4>Edit the <code>pom.xml</code> file so the cmd line <code>-help</code> option works:</h4>

<pre><code>git diff pom.xml

diff --git a/pom.xml b/pom.xml
index 1098a2d..4fedcbc 100644
--- a/pom.xml
+++ b/pom.xml
@@ -122,7 +122,7 @@
     &lt;testSourceDirectory&gt;src/test&lt;/testSourceDirectory&gt;
     &lt;resources&gt;
       &lt;resource&gt;
-        &lt;directory&gt;src/test/resources&lt;/directory&gt;
+        &lt;directory&gt;src/main/resources&lt;/directory&gt;
       &lt;/resource&gt;
     &lt;/resources&gt;
     &lt;testResources&gt;
</code></pre>

<p>mvn clean test
mvn install</p>

<h3>Running Sharpen:</h3>

<h4>Cmd line help:</h4>

<pre><code>java -jar ${PWD}/src/target/sharpencore-0.0.1-SNAPSHOT-jar-with-dependencies.jar -help     
</code></pre>

<h4>Convert Java to C# (with config)</h4>

<h5>Copy config:</h5>

<pre><code>cp ../sharpen_imazen_config/sharpen-all-options .
cp ../sharpen_imazen_config/sharpen.config/target/MEConfiguration.sharpenconfig .
</code></pre>

<h4>Run with config:</h4>

<pre><code>java -jar \
   ${PWD}/src/target/sharpencore-0.0.1-SNAPSHOT-jar-with-dependencies.jar \
   /Users/sushi/code/github/PlayScriptParser/src \
   -configurationClass \
   MEConfiguration.sharpenconfig-jar @sharpen-all-options

~~~
Configuration Class: sharpen.config.MEConfiguration
Configuration Class: Sharpen.Runtime
project: asc
Pascal case mode: NamespaceAndIdentifiers
Native type system mode on.
Separating interface constants to their own classes.
Organize usings mode on.
~~~
</code></pre>

<h4>Convert C# Location:</h4>

<p>Your converted C# classes will be located <strong>NEXT</strong> the original source directory, <code>/Users/sushi/code/github/PlayScriptParser</code>, in my case, the <strong>asc.net</strong> directory</p>

<pre><code>cd /Users/sushi/code/github/PlayScriptParser
ls -1
    asc.net
    build
    src
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sharpen]]></title>
    <link href="http://sushihangover.github.io/sharpen/"/>
    <updated>2016-09-25T10:44:44-07:00</updated>
    <id>http://sushihangover.github.io/sharpen</id>
    <content type="html"><![CDATA[<p>I needed to convert some Java code to C# and one of the best ways that I ever found is to use <code>Sharpen</code>. This used to be available as a Eclipse plugin but you can find a cli version at Mono&rsquo;s Github account:</p>

<ul>
<li><a href="https://github.com/mono/sharpen">https://github.com/mono/sharpen</a></li>
</ul>


<p>One of the <em>issues</em> in running Sharpen is that it requires Java 1.7, <strong>NOT 1.6, nor 1.8.</strong>.</p>

<p>So you need to have a Java 7 install. An easy way if you are already using homebrew, is available via a cask:</p>

<pre><code>brew install Caskroom/versions/java7
</code></pre>

<p>Note: If you get errors, make sure that your casks are updated, <code>brew upgrade brew-cask</code></p>

<h4>Current JDK:</h4>

<pre><code>/usr/libexec/java_home
/Library/Java/JavaVirtualMachines/jdk1.8.0_92.jdk/Contents/Home
</code></pre>

<h4>Get a list of Install JDKs:</h4>

<pre><code>ls -l1 /Library/Java/JavaVirtualMachines/
1.6.0.jdk
jdk1.7.0_71.jdk
jdk1.7.0_80.jdk
jdk1.8.0_92.jdk
</code></pre>

<h4>Export a &ldquo;new home&rdquo;:</h4>

<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home
</code></pre>

<p>Now I can build and run <code>sharpen</code>, i.e.:</p>

<pre><code>mvn clean test
mvn install
java -jar src/target/sharpencore-0.0.1-SNAPSHOT-jar-with-dependencies.jar /Users/sushi/github/PlayParser
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[C# AppleScript calls with functions, arguments and results]]></title>
    <link href="http://sushihangover.github.io/c-number-applescript-calls-with-functions-arguments-and-results/"/>
    <updated>2015-12-06T20:06:17-08:00</updated>
    <id>http://sushihangover.github.io/c-number-applescript-calls-with-functions-arguments-and-results</id>
    <content type="html"><![CDATA[<p>Posted a new C# library to <a href="https://github.com/sushihangover/Sushi.AppleScript">Github</a> to allow the calling of AppleScript by function name, passing in arguments and receiving a return value.</p>

<h1>Sushi.AppleScript</h1>

<p><a href="https://github.com/sushihangover/Sushi.AppleScript">https://github.com/sushihangover/Sushi.AppleScript</a></p>

<p>The C# library allows you to execute AppleScript code that originates from a file or <code>string</code> and:</p>

<ul>
<li>Call function by name (Optional)</li>
<li>Pass multiple arguments to a function (Optional)</li>
<li>Execution success or failure</li>
<li>Return results from the function call</li>
</ul>


<h3>Build:</h3>

<pre><code>cd Sushi.AppleScript.Native
xcodebuild
cd -
xbuild Sushi.AppleScript.sln
</code></pre>

<h3>Test:</h3>

<p><strong>Mono&rsquo;s supplied nunit-console:</strong></p>

<pre><code>MONO_IOMAP=all nunit-console Sushi.AppleScript.Test/SushiAppleScript.Test.csproj
</code></pre>

<p><strong>NUnit 3.x console:</strong></p>

<pre><code>mono $(MTOOLS)/nunit3-console.exe Sushi.AppleScript.Test/SushiAppleScript.Test.csproj
</code></pre>

<p><strong>Note:</strong></p>

<pre><code>AppleScript.cs(7,7): error CS0246: The type or namespace name `MonoMac' could not be found. Are you missing an assembly reference?
</code></pre>

<p>If you do not have a local copy of <a href="https://github.com/mono/monomac">MonoMac</a>, xbuild will fail. It is available via &ldquo;Xamarin Studio&rdquo;:</p>

<pre><code>mdtool build Sushi.AppleScript.sln
</code></pre>

<h4>Example Usage:</h4>

<pre><code>var scptInfo = new FileInfo ("./AppleScripts/FunctionTests.txt");
string funcName = "IsRunning";
List&lt;string&gt; argList = new List&lt;string&gt; () {
    @"Finder",
};
string scriptReturnValue;
var executionSuccess = AppleScript.Run (scptInfo, funcName, argList, out scriptReturnValue);
</code></pre>

<ul>
<li>Consult <a href="https://github.com/sushihangover/Sushi.AppleScript/blob/master/Sushi.AppleScript.Test/Test.cs">Test.cs</a> for more examples</li>
</ul>


<h3>Supports:</h3>

<ul>
<li>MonoMac</li>
<li>Xamarin.Mac</li>
<li>i386 and x86_64 Mono Support</li>
</ul>


<h3>Runtime/Deployment debugging:</h3>

<p>Runtime/Deployment debugging available by setting an environment variable, <code>APPLE_SCRIPT_DEBUG</code>:</p>

<p><code>export APPLE_SCRIPT_DEBUG=true</code></p>

<p>The results are logged with the prefix <code>AppleScript:</code>, output is avaiable via Console.app.</p>

<h3>Sushi.AppleScript</h3>

<p>The C# library that provides the P/Invoke wrapper to execute AppleScript functions</p>

<h3>Sushi.AppleScript.Native</h3>

<p>An OS-X Universial (i386 &amp; x86_64) Shared Library:</p>

<ul>
<li><code>libAppleScriptEvent.dylib</code></li>
</ul>


<h3>Sushi.AppleScript.Test</h3>

<p>NUnit tests for Sushi.AppleScript library</p>

<h3>Sushi.AppleScript.CLI</h3>

<p>TODO: Provides an <code>osascript</code> style CLI utility to execute functions with AppleScript files (<code>osascript</code> does not contain this feature)</p>

<h3>License:</h3>

<ul>
<li>The MIT License (MIT)</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Safari - Changing the Quit Shortcut]]></title>
    <link href="http://sushihangover.github.io/safari-changing-the-quit-shortcut/"/>
    <updated>2015-11-25T08:44:09-08:00</updated>
    <id>http://sushihangover.github.io/safari-changing-the-quit-shortcut</id>
    <content type="html"><![CDATA[<p><img class="left" src="/images/OS-X-Safari-Quit.png" title="Quit" >I tend to hit the <code>Cmd-Q</code> instead of <code>Cmd-W</code> when I am closing a tab and in my older installs on OS-X I had changed the shortcut for <code>Safari Quit</code> and that is one thing (among others) that I did not migrate to my new OS-X 10.11 install.</p>

<p>So, open up <code>System Perferences</code> and go to <code>KeyBoards</code> and then the <code>Shortcuts</code> pane and <strong>add</strong> an <code>App Shortcuts</code> for Safari only for the menu item called <code>Quit Safari</code>, mine now is <code>Ctrl-CMD-Q</code>:</p>

<p><img src="/images/OS-X-Safari-Shortcuts.png" alt="" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CursesSharp (C# NCurses) Updated]]></title>
    <link href="http://sushihangover.github.io/cursessharp-c-number-ncurses-updated/"/>
    <updated>2015-11-21T15:10:58-08:00</updated>
    <id>http://sushihangover.github.io/cursessharp-c-number-ncurses-updated</id>
    <content type="html"><![CDATA[<p>I made some updates to the CursesSharp project, so check out the update README.md for details:</p>

<h1>CursesSharp</h1>

<p><img src="http://sushihangover.github.io/images/FireworksDemo.gif" alt="" /></p>

<h2>INTRODUCTION</h2>

<p>CursesSharp is a C# wrapper for curses library.
The latest version of this &lsquo;fork&rsquo;&lsquo; can be found at <a href="https://github.com/sushihangover/CursesSharp">Github</a>.
The original version can be found at the <a href="http://sourceforge.net/projects/curses-sharp/">SourceForge.net project page</a>.</p>

<p><img src="http://sushihangover.github.io/images/RainDemo.gif" alt="RainDemo" /></p>

<h2>DOCUMENTATION</h2>

<p>CursesSharp consists of a .NET assembly (CursesSharp.dll) and a native wrapper shared library (DLL) which is linked with PDCurses (in Windows) or ncurses  (in Unix-like systems). This wrapper library is called CursesWrapper.dll  in Windows or libCursesWrapper.so in Unix or libCursesWrapper.dylib in OS-X. CursesSharp provides a bit cleaner
API to curses than the original one, although function names remain unchanged for the most part.</p>

<p><img src="http://sushihangover.github.io/images/UnicodeDemo.gif" alt="" /></p>

<h3>CursesSharp namespace contains several important classes:</h3>

<ul>
<li>Defs - contains constants from curses: attribute, color and key definitions
  as well as some macros (COLOR_PAIR, PAIR_NUMBER)</li>
<li>Curses - the main interface to curses; contains methods global to the library,
  a StdScr property that returns the stdscr window, and as a convenience,
  some window-specific functions that operate on stdscr</li>
<li>Window - represents a curses window that can be written to, or read from;
  contains wrappers for most of curses functions with names starting with
  w<em> or mvw</em></li>
<li>CursesException - an exception class, thrown when a curses function
  reports an error</li>
</ul>


<p><em>Documentation is (always) under construction. Help would be much appreciated.</em></p>

<h2>Installing CursesSharp on OS-X</h2>

<p>These are the instructions for building CursesSharp on OS-X.</p>

<p>The build process has been tested on:</p>

<ul>
<li>OS-X 10.10.5</li>
<li>Apple LLVM version 7.0.0 (clang-700.1.76)</li>
<li>Mono JIT compiler version 4.2.1 64-bit build.</li>
</ul>


<h2>0. Prerequisites</h2>

<p>The native library is now built as a &lsquo;fat&rsquo; library so either a Mono 32-bit or 64-bit build can be used.</p>

<p><strong>$> file libCursesWrapper.so</strong></p>

<pre><code>libCursesWrapper.so: Mach-O universal binary with 2 architectures
libCursesWrapper.so (for architecture i386):    Mach-O dynamically linked shared library i386
libCursesWrapper.so (for architecture x86_64):  Mach-O 64-bit dynamically linked shared library x86_64
</code></pre>

<!--A **64-bit build of Mono** as the the native shared library (so/dylib) is of ARCH type x64_86. 

**If you are running the default 32-bit Mono install, you will have to build the native library as ARCH i386. Currently there is not an included build process for this.
**
-->


<h2>1. Getting CursesSharp</h2>

<p>You can clone it from the following repository:</p>

<pre><code>https://github.com/sushihangover/CursesSharp.git
</code></pre>

<h2>2. Make the Native Library</h2>

<pre><code>mdtool build CursesSharp.Native.sln --target:Build --configuration:Release
mdtool build CursesSharp.Native.sln --target:Build --configuration:Debug
</code></pre>

<h2>3. Make the C# Libraries and Demos</h2>

<pre><code>xbuild CursesSharp.sln /target:Clean
xbuild CursesSharp.sln /target:Build
</code></pre>

<p>Note: To run the demos from the CLI, make sure that set the <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/dyld.1.html"><code>DYLD_FALLBACK_LIBRARY_PATH</code></a>. While still in the repo&rsquo;s root directory:</p>

<pre><code>export DYLD_FALLBACK_LIBRARY_PATH=$(PWD)/CursesSharp.Native/bin/Debug:/usr/lib:$DYLD_FALLBACK_LIBRARY_PATH
</code></pre>

<p>There is also a CI script that can be called via <code>source</code> to setup <code>DYLD_FALLBACK_LIBRARY_PATH</code> and <code>LD_LIBRARY_PATH</code></p>

<pre><code>source CI/libpath-source-me.sh
</code></pre>

<p>To learn more about <code>dyld</code> check out the <code>man</code> page:</p>

<pre><code>man dyld
</code></pre>

<h2>Demos:</h2>

<p>There are various demos available to review:</p>

<ul>
<li>Demo.CursesSharp.Firework</li>
<li>Demo.CursesSharp.Gui.HelloWorld</li>
<li>Demo.CursesSharp.HelloWorld</li>
<li>Demo.CursesSharp.Rain</li>
<li>Demo.CursesSharp.Unicode</li>
<li>Demo.Gui.MessageBox</li>
<li>Demo.Gui.MidnightCommander</li>
<li>Demo.Gui.Timeout</li>
<li>Demo.Native.ResizeTerm</li>
</ul>


<h2>Rain Demo:</h2>

<pre><code>pushd CursesSharp.Demo/Demo.CursesSharp.Rain/bin/x64/Debug/
mono RainDemo.exe
popd
</code></pre>

<p><img src="http://sushihangover.github.io/images/RainDemo.gif" alt="RainDemo" /></p>

<h2>FireWorks Demo:</h2>

<pre><code>pushd CursesSharp.Demo/Demo.CursesSharp.Rain/bin/x64/Debug/
mono FireworkDemo.exe
popd
</code></pre>

<p><img src="http://sushihangover.github.io/images/FireworksDemo.gif" alt="" /></p>

<h2>MidnightCommander Demo:</h2>

<pre><code>pushd CursesSharp.Demo/Demo.Gui.MidnightCommander/bin/x64/Debug/
mono Demo.Gui.MidnightCommander.exe
popd
</code></pre>

<p><img src="http://sushihangover.github.io/images/CursesSharp-Midnight.png" alt="" /></p>

<h2>Installing CursesSharp on Linux</h2>

<h3>0. Prerequisites</h3>

<p>Note: It is assumed you are running 64-bit Linux (ARCH x86_64)</p>

<p>Install some dependencies:</p>

<pre><code>sudo apt-get install lib32ncursesw5-dev
sudo apt-get install lib32ncurses5-dev
sudo apt-get install ncurses-doc
</code></pre>

<h2>1. Getting CursesSharp</h2>

<p>You will have to obtain CursesSharp sources. You clone it from the following repository:</p>

<pre><code>https://github.com/sushihangover/CursesSharp.git
</code></pre>

<h3>2. Make the Native Library</h3>

<pre><code>mdtool build CursesSharp.Native.Linux.sln --target:Build --configuration:Release
mdtool build CursesSharp.Native.Linux.sln --target:Build --configuration:Debug
</code></pre>

<h3>3. Make the C# Libraries and Demos</h3>

<pre><code>xbuild CursesSharp.sln /target:Clean /property:configuration=Debug
xbuild CursesSharp.sln /target:Build /property:configuration=Debug
</code></pre>

<h1>Demos:</h1>

<p>Note: To run the demos from the CLI, make sure that set the <a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html"><code>LD_LIBRARY_PATH</code></a>. While still in the repo&rsquo;s root directory:</p>

<pre><code>export LD_LIBRARY_PATH=$(PWD)/CursesSharp.Native/bin/Debug:/usr/lib:$LD_LIBRARY_PATH
</code></pre>

<p>There is also a CI script that can be called via <code>source</code> to setup <code>DYLD_FALLBACK_LIBRARY_PATH</code> and <code>LD_LIBRARY_PATH</code></p>

<pre><code>source CI/libpath-source-me.sh
</code></pre>

<p>To learn more about <code>ld</code> check out the <code>man</code> page:</p>

<pre><code>man ld
</code></pre>

<h2>MessageBox Demo:</h2>

<pre><code>cd CursesSharp.Demo/Demo.Gui.MidnightCommander/bin/x64/Debug/
mono Demo.Gui.Messagebox.exe
cd -
</code></pre>

<h5>(Ubuntu / Konsole)</h5>

<p><img src="http://sushihangover.github.io/images/CursesSharp-MsgBox-Konsole.png" alt="" /></p>

<h2>MidnightCommander Demo:</h2>

<pre><code>cd CursesSharp.Demo/Demo.Gui.MidnightCommander/bin/x64/Debug/
mono Demo.Gui.MidnightCommander.exe
cd -
</code></pre>

<h4>(Ubuntu / Konsole)</h4>

<p><img src="http://sushihangover.github.io/images/CursesSharp-Midnight-Konsole.png" alt="" /></p>

<h2>Installing CursesSharp on Windows</h2>

<p>Refer the original Windows project, source code and instructions are <a href="http://curses-sharp.sourceforge.net/index.php?page=windows">here</a></p>

<h2>CI</h2>

<p>OS-X:</p>

<pre><code>source CI/libpath-source-me.sh
CI/build.osx.sh
</code></pre>

<p>Linux:</p>

<pre><code>{TODO}
</code></pre>

<h2>TODO &amp; Contributors:</h2>

<ul>
<li>Nuget support</li>
<li>MS Window support (via PDCurses)</li>
<li>Documentation</li>
<li>Bug reporting/fixes</li>
</ul>


<p>Looking for contributors in these areas and/or any other areas that you would help out on.</p>

<p><a href="https://github.com/sushihangover/CursesSharp">Fork and Contribute</a> ;-)</p>
]]></content>
  </entry>
  
</feed>
