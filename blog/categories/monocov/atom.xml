<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: -monocov | SushiHangover]]></title>
  <link href="http://sushihangover.github.io/blog/categories/monocov/atom.xml" rel="self"/>
  <link href="http://sushihangover.github.io/"/>
  <updated>2015-06-15T12:30:26-07:00</updated>
  <id>http://sushihangover.github.io/</id>
  <author>
    <name><![CDATA[RobertN]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MonoCov - Building on OS-X]]></title>
    <link href="http://sushihangover.github.io/monocov-building-on-os-x/"/>
    <updated>2015-06-15T10:52:29-07:00</updated>
    <id>http://sushihangover.github.io/monocov-building-on-os-x</id>
    <content type="html"><![CDATA[<p>My <a href="http://stackoverflow.com/questions/20757444/how-to-compile-c-sharp-code-to-64-bit-in-xamarin-studio-on-os-x/30714801#30714801">answer</a> from Stackoverflow on compiling MonoCov on OS-X and Mono 4.0.x</p>

<h1>Clone the MonoCov repo</h1>

<p>git clone <a href="https://github.com/mono/monocov.git">https://github.com/mono/monocov.git</a> MonoCov
cd MonoCov</p>

<h1>A really old version of cecil and it not available as a nuget</h1>

<p>curl <a href="http://go-mono.com/archive/cecil/cecil-0.6-bin.zip">http://go-mono.com/archive/cecil/cecil-0.6-bin.zip</a> -o cecil-0.6-bin.zip
unzip cecil-0.6-bin.zip</p>

<h1>Make sure configure can find the Mono.Option source file</h1>

<p>export PKG_CONFIG_PATH=/Library/Frameworks/Mono.framework/Versions/4.0.1/lib:/Library/Frameworks/Mono.framework/Versions/4.0.1/lib/pkgconfig:$PKG_CONFIG_PATH
export</p>

<h1>Config to install to users home dir</h1>

<p>/configure &ndash;cecil=$PWD/monocov/cecil-0.6/Mono.Cecil.dll &ndash;prefix $HOME/monocov</p>

<h1>Fix Makefile, gmcs no longer exists under Mono 4.x and Makefile is hard coded</h1>

<p>sed -i.bak s/gmcs/mcs/g Makefile</p>

<h1>Pass -m32 to make since OS-X Mono framework is still 32-bit</h1>

<p>CC=&ldquo;cc -m32&rdquo; make</p>

<h1>Install does not properly create bin dir, do it before the first install</h1>

<p>mkdir $HOME/monocov/bin</p>

<h1>Install..</h1>

<p>make install</p>

<h2>Compile a test app and test MonoCov:</h2>

<p>// Save this to a file named Program.cs
using System;
namespace Foobar
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            Console.WriteLine (&ldquo;Hello MonoCov&rdquo;);
        }
    }
}</p>

<h1>Compile a sample app</h1>

<p>mcs Program.cs</p>

<h1>Update path to include MonoCov so mono can load it as a profiler</h1>

<p>export PATH=$HOME/monocov:$PATH
mono &ndash;debug &ndash;profile=monocov Program.exe</p>

<h1>GUI Framework DllNotFoundException fix (if needed)</h1>

<p>export DYLD_FALLBACK_LIBRARY_PATH=&ldquo;/Library/Frameworks/Mono.framework/Versions/Current/lib:/usr/local/lib:/usr/lib&rdquo;</p>

<h1>Update path to include MonoCov</h1>

<p>export PATH=$HOME/monocov/bin:$PATH</p>

<p><a href="http://www.mono-project.com/docs/debug+profile/profile/code-coverage/">Mono Code Coverage Profiler : MonoCov</a></p>

<p><a href="http://evain.net/blog/articles/2007/10/05/mono-cecil-0-6">Mono.Cecil 0.6 05 Oct 2007</a></p>
]]></content>
  </entry>
  
</feed>
