<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Xcorflags.Exe | SushiHangover]]></title>
  <link href="http://sushihangover.github.io/blog/categories/xcorflags-dot-exe/atom.xml" rel="self"/>
  <link href="http://sushihangover.github.io/"/>
  <updated>2015-10-28T00:11:34-07:00</updated>
  <id>http://sushihangover.github.io/</id>
  <author>
    <name><![CDATA[RobertN]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Corflags   Release X Cor Flags Version 1.0.5643.36015]]></title>
    <link href="http://sushihangover.github.io/corflags-release-xcorflags-version-1-dot-0-5643-dot-36015/"/>
    <updated>2015-06-15T06:09:45-07:00</updated>
    <id>http://sushihangover.github.io/corflags-release-xcorflags-version-1-dot-0-5643-dot-36015</id>
    <content type="html"><![CDATA[<h1><a href="https://github.com/sushihangover/CorFlags/releases/tag/v1.0.5643.36015">xCorFlags Version 1.0.5643.36015</a></h1>

<p>Maintenance release of the cross-platform CorFlags Conversion Tool is up on  <a href="https://github.com/sushihangover/corflags">Github</a>.</p>

<pre><code>git log v1.0.5643.30429..v1.0.5643.36015
commit 0125dffeda467b70e869b898d05203aba3669e88
Author: SushiHangover &lt;sushihangover@outlook.com&gt;
Date:   Sun Jun 14 20:06:00 2015 -0700

Fix absolute paths to the assemblies that are passed in
</code></pre>

<p>This is a cross-platform version of the Microsoft CorFlags tool that is included in the .Net Framework SDK installations and is a self-contained x86 CIL Image (via <a href="https://github.com/gluck/il-repack">ILRepack</a>) that runs on:</p>

<ul>
<li>Windows (xCorFlags)</li>
<li>OS-X (mono ./xCorFlags.exe)</li>
<li>Linux (mono ./xCorFlags.exe)</li>
</ul>


<p>For additional information:</p>

<ul>
<li><a href="">https://github.com/sushihangover/corflags</a></li>
<li><a href="">https://github.com/sushihangover/CorFlags/blob/master/README.md</a></li>
<li><a href="">http://sushihangover.github.io/blog/categories/corflags/</a></li>
<li><a href="">https://msdn.microsoft.com/en-us/library/ms164699%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Corflags   Release X Cor Flags Version 1.0.5643.30429]]></title>
    <link href="http://sushihangover.github.io/corflags-release-xcorflags-version-1-dot-0-5643-dot-30429/"/>
    <updated>2015-06-14T19:09:45-07:00</updated>
    <id>http://sushihangover.github.io/corflags-release-xcorflags-version-1-dot-0-5643-dot-30429</id>
    <content type="html"><![CDATA[<h1><a href="https://github.com/sushihangover/CorFlags/releases/tag/v1.0.5643.30429">xCorFlags Version 1.0.5643.30429</a></h1>

<p>The first full release of the cross-platform CorFlags Conversion Tool is up on  <a href="https://github.com/sushihangover/corflags">Github</a>.</p>

<p>This is a cross-platform version of the Microsoft CorFlags tool that is included in the .Net Framework SDK installations and is a self-contained x86 CIL Image (via <a href="https://github.com/gluck/il-repack">ILRepack</a>) that runs on:</p>

<ul>
<li>Windows (xCorFlags)</li>
<li>OS-X (mono ./xCorFlags.exe)</li>
<li>Linux (mono ./xCorFlags.exe)</li>
</ul>


<p>For additional information:</p>

<ul>
<li><a href="">https://github.com/sushihangover/corflags</a></li>
<li><a href="">https://github.com/sushihangover/CorFlags/blob/master/README.md</a></li>
<li><a href="">http://sushihangover.github.io/blog/categories/corflags/</a></li>
<li><a href="">https://msdn.microsoft.com/en-us/library/ms164699%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cor Flags Conversion Tool   Cross Platform Release On Github]]></title>
    <link href="http://sushihangover.github.io/corflags-cross-platform-release-on-github/"/>
    <updated>2015-06-14T11:24:42-07:00</updated>
    <id>http://sushihangover.github.io/corflags-cross-platform-release-on-github</id>
    <content type="html"><![CDATA[<p>I posted the first (alpha) release of a cross-platform version of Microsoft&rsquo;s CorFlags Conversion tool to<a href="https://github.com/sushihangover/CorFlags"> Github</a>.</p>

<p>This alpha release is read-only and while accepting argument flags to change the CIL image, you will receive a not implemented exception:</p>

<pre><code>corflags : Error CF0999: Unknown exception: The requested feature is not implemented.
</code></pre>

<p>The next release will be feature complete as I just needed to get a backup of the current version to Github for now.</p>

<h1><strong>Repo Readme:</strong></h1>

<h1>xCorFlags.exe (CorFlags Conversion Tool)</h1>

<h2>Mono and .NET Framework 4.5</h2>

<h3>The CorFlags Conversion tool allows you to configure the CorFlags section of the header of a portable executable image.</h3>

<p>This is a <strong>cross-platform</strong> version of the <a href="https://msdn.microsoft.com/en-us/library/ms164699%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396">Microsoft CorFlags</a> tool that is included in the .Net Framework SDK installations.</p>

<ul>
<li><a href="https://msdn.microsoft.com/en-us/library/ms164699%28v=vs.110%29.aspx?f=255&amp;MSPPError=-2147217396">MSDN Documentation for CorFlag.exe</a></li>
</ul>


<p>This xplat version strives to be argument option and output compatible (using /nologo) with the Microsoft version.</p>

<p>*Note: Platform independent argument prefixes can be used: <strong>&lsquo;/&rsquo; or &lsquo;-&rsquo;</strong> *</p>

<h2>Usage:</h2>

<pre><code>Mono/.NET Framework CorFlags Conversion Tool.  Version  0.9.5643.21314
Copyright (c) SushiHangover.  All rights reserved.

Windows Usage: xCorflags.exe Assembly [options]
 X-Plat Usage: mono xcorflags.exe Assembly [options]

If no options are specified, the flags for the given image are displayed.

     Options: (/ or - prefixed
     /ILONLY+ /ILONLY-       Sets/clears the ILONLY flag
     /32BITREQ+ /32BITREQ-   Sets/clears the bits indicating 32-bit x86 only
     /32BITPREF+ /32BITPREF- Sets/clears the bits indicating 32-bit preferred
     /UpgradeCLRHeader       Upgrade the CLR Header to version 2.5
     /RevertCLRHeader        Revert the CLR Header to version 2.0
     /Force                  Force an assembly update even if the image is
         strong name signed.
         WARNING: Updating a strong name signed assembly
         will require the assembly to be resigned before
         it will execute properly.
     /nologo                 Prevents corflags from displaying logo
</code></pre>

<h2>Output:</h2>

<p>When running with the nologo option, the output should be compatible with Microsoft&rsquo;s version, a nice to have for those who already are used the output to CorFlags.exe or those that have existing scripts.</p>

<pre><code>mono ./CorFlags.exe /nologo CorFlags.exe
Version   : v4.0.30319
CLR Header: 2.5
PE        : PE32
CorFlags  : 0x3
ILONLY    : 1
32BITREQ  : 1
32BITPREF : 0
Signed    : 0
</code></pre>

<h2>Without using the nologo argument:</h2>

<pre><code>mono ./CorFlags.exe CorFlags.exe SudoKnights.exe
Mono/.NET Framework CorFlags Conversion Tool.  Version  0.9.5643.21314
Copyright (c) SushiHangover.  All rights reserved.

Version   : v4.0.30319
CLR Header: 2.5
PE        : PE32
CorFlags  : 0x20003
ILONLY    : 1
32BITREQ  : 1
32BITPREF : 1
Signed    : 0
</code></pre>

<h3>versus:</h3>

<pre><code>PS&gt; .\CorFlags.exe .\Test\x64\Release\ExeForTesting.exe
Microsoft (R) .NET Framework CorFlags Conversion Tool.  Version  4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

Version   : v4.0.30319
CLR Header: 2.5
PE        : PE32+
CorFlags  : 0x1
ILONLY    : 1
32BITREQ  : 0
32BITPREF : 0
Signed    : 0
</code></pre>

<p>Built and tested using Mono 4.0.1 on:</p>

<ul>
<li>Windows</li>
<li>OS-X</li>
<li>Linux</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ms Cor Flags   Showing Incorrect Flags]]></title>
    <link href="http://sushihangover.github.io/ms-corflags-showing-incorrect-flags/"/>
    <updated>2015-06-14T10:40:23-07:00</updated>
    <id>http://sushihangover.github.io/ms-corflags-showing-incorrect-flags</id>
    <content type="html"><![CDATA[<p>In the Microsoft supplied CorFlags.exe, when displaying the flags on a COMIMAGE_FLAGS_32BITPREFERRED &amp;&amp; COMIMAGE_FLAGS_32BITREQUIRED flagged CIL PE image, it does not show that the COMIMAGE_FLAGS_32BITREQUIRED as being set.</p>

<p>In the case of this output:</p>

<pre><code>Version   : v4.0.30319
CLR Header: 2.5
PE        : PE32
CorFlags  : 0x20003
ILONLY    : 1
32BITREQ  : 0
32BITPREF : 1
Signed    : 0
</code></pre>

<p>The 0x20003 flags breaks down into:</p>

<ul>
<li>32BITPREFERRED (0x20000)</li>
<li>32BITREQUIRED (0x00002)</li>
<li>ILONLY (0x00001)</li>
</ul>


<p>So why is <strong>32BITREQ</strong> not shown as selected?</p>

<p>My <a href="https://github.com/sushihangover/corflags">xplat version of CorFlags</a> shows the following:</p>

<pre><code>Version   : v4.0.30319
CLR Header: 2.5
PE        : PE32
CorFlags  : 0x20003
ILONLY    : 1
32BITREQ  : 1
32BITPREF : 1
Signed    : 0
</code></pre>

<p>The 32BITREQ is shown as flagged as the value of 0x20003 includes that flag&hellip;. so who is right?</p>

<p>Microsoft in hiding that the 32BITREQ flag is set on PEs that have 32BITPREF set (while still showing the actual flag value), is that right? a bug? Should I do the same in my xplat version of the tool? Let me know in the comments below, or even better post an issue over at my xplat <a href="https://github.com/sushihangover/corflags/issues/new">CorFlags</a> project (Thanks).</p>

<h2>Misc:</h2>

<p>In setting the compiler /platform flag to &lsquo;anycpu32bitpreferred&rsquo; you are targeting 32-bit even if on a 64-bit system, thus the 32BITREQ and 32BITPREF flags are set.</p>

<p><blockquote><p>anycpu32bitpreferred compiles your assembly to run on any platform. Your application runs in 32-bit mode on systems that support both 64-bit and 32-bit applications. You can specify this option only for projects that target the .NET Framework 4.5. (Or Mono 4.5&hellip;)</p></blockquote></p>

<p>IMAGE_COR20_HEADER.Flags values from \Include\um\CorHdr.h</p>

<pre><code>COMIMAGE_FLAGS_ILONLY               =0x00000001,
COMIMAGE_FLAGS_32BITREQUIRED        =0x00000002,
COMIMAGE_FLAGS_IL_LIBRARY           =0x00000004,
COMIMAGE_FLAGS_STRONGNAMESIGNED     =0x00000008,
COMIMAGE_FLAGS_NATIVE_ENTRYPOINT    =0x00000010,
COMIMAGE_FLAGS_TRACKDEBUGDATA       =0x00010000,
COMIMAGE_FLAGS_32BITPREFERRED       =0x00020000,
</code></pre>
]]></content>
  </entry>
  
</feed>
