<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | SushiHangover]]></title>
  <link href="http://sushihangover.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://sushihangover.github.io/"/>
  <updated>2015-08-03T13:15:21-07:00</updated>
  <id>http://sushihangover.github.io/</id>
  <author>
    <name><![CDATA[RobertN]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress   Deploy And Update Git Source]]></title>
    <link href="http://sushihangover.github.io/octopress-deploy-and-update-git-source/"/>
    <updated>2015-06-08T06:39:42-07:00</updated>
    <id>http://sushihangover.github.io/octopress-deploy-and-update-git-source</id>
    <content type="html"><![CDATA[<p><img src="/images/Octopress_logo.png" alt="" /></p>

<p>I use <a href="http://octopress.org">Octopress</a> for this <a href="https://github.com/sushihangover">GitHub</a> blog and can tend to forget to push the source to Github as it is not part of the &lsquo;rake deploy&rsquo;.</p>

<p>&lsquo;rake deploy&rsquo; only updates the master branch on Github on order to publish the website and instead of hack'ing the deploy function to handle pushing the &lsquo;'source&rsquo; branch also (waiting on the Octopress 3.0 release for that), I wrote a script to handle it all.</p>

<p>This <em>lazy</em> script that does all the steps that I would have to do manually but tend to never do. And it is in my root Octopress directory so it included in my source revisions ;-)</p>

<p>Nothing special: just generates, deploys, adds all on the source branch along with a commit and push. For good measure it then garbage collects the repo to keep everything clean.</p>

<pre><code>#!/usr/bin/env bash
echo "Generate and deploying website"
rake generate
rake deploy
echo "Commiting and pushing source files"
git add --all; 
git commit -m "New posts"; 
git push 
git gc
pushd _deploy
git gc
popd
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress: Backing Up Your Source Directory]]></title>
    <link href="http://sushihangover.github.io/octopress-backing-up-your-source-directory/"/>
    <updated>2014-02-12T21:00:12-08:00</updated>
    <id>http://sushihangover.github.io/octopress-backing-up-your-source-directory</id>
    <content type="html"><![CDATA[<p>It has only been a couple of days using <a href="http://octopress.org">Octopress</a> and <a href="http://pow.cx">Pow*</a> but I am already sold. For offline blogging, <a href="http://pages.github.com">GitHub Pages</a> support, a great set of standard Markdown-ish driven Plugins, etc&hellip; the workflow is great. There are a few things that I am missing like:</p>

<p>My Missing Octopress Items:</p>

<blockquote><ul>
<li>Image Auto Thumb-nailing</li>
<li>Image Popups from those Thumbnails</li>
<li>Post Staging (The &lsquo;published: false&rsquo; yaml front matter is a start but&hellip;.)</li>
<li>Auto source directory version control</li>
</ul>
</blockquote>

<p>That last one was my highest priority. When you run the Octopress GitHub Pages setup, it configures the deployment repo (XXXXXX.github.io), but you still need to backup and/or version control the &lsquo;source&rsquo; directory.</p>

<p>Here is my quick way of doing this using the deployment repo.</p>

<blockquote><ul>
<li>Add a <strong>source</strong> branch your your &ldquo;XXXXXX.github.io&rdquo; repo</li>
<li>Set your local source directory as a <strong>single branch</strong> of that repo</li>
<li>Commit and Push after you do a <em>rake deploy</em></li>
</ul>
</blockquote>

<p>So lets add a source branch to your GitHub Page repo:
        Note: This is my quick way (ie. hackie) to get an <strong><em>EMPTY</em> new <em>remote</em> branch</strong> into an existing repo. If someone knows a better way, I&rsquo;d love to hear it.</p>

<p>{% codeblock lang:bash %}</p>

<h1>Get your current repo and place it into a a temp directory</h1>

<p>git clone <a href="https://github.com/sushihangover/sushihangover.github.io.git">https://github.com/sushihangover/sushihangover.github.io.git</a> foo.bar
pushd foo.bar</p>

<h1>Add a new branch to your local copy</h1>

<p>git checkout -b source</p>

<h1>Delete all the existing context</h1>

<p>rm -Rf *</p>

<h1>Commit all those deletes</h1>

<p>git commit &ndash;all &ndash;message=&ldquo;Initial Empty source branch&rdquo;</p>

<h1>Push that emopty branch back to GitHub</h1>

<p>git push
popd</p>

<h1>Get rid of that temp. directory</h1>

<p>rm -Rf foo.bar
{% endcodeblock %}</p>

<p>You already have an existing source directory and if you did not change the _config.yaml defaults is under your Octopress directory and those files need to be placed in this new source branch you just created.</p>

<p>{% codeblock lang:bash %}</p>

<h1>Move your existing source directory out of the way for now</h1>

<p>mv source source.org</p>

<h1>Clone your GitHub Page repo BUT only a single branch of it, only the source branch and into a directory named source</h1>

<h1>Note: The &ldquo;&ndash;single-branch -branch source&rdquo; options are not used by most git users but can make speciallized repo copies quick and fool-proof</h1>

<p>git clone &ndash;single-branch -branch source <a href="https://github.com/sushihangover/sushihangover.github.io.git">https://github.com/sushihangover/sushihangover.github.io.git</a> source</p>

<h1>Now copy your existing source files into this empty repo directory</h1>

<p>cp -R source.org source
pushd source</p>

<h1>Commit and Push your sources files to GitHub</h1>

<p>git commit &ndash;all &ndash;message=&ldquo;Initial source branch commit&rdquo;</p>

<h1>Add your commit comment and save</h1>

<p>git push
{% endcodeblock %}</p>

<p>Now you have two branches in your Pages repo. <strong>master</strong> will be your deployed/published blog pages and <strong>source</strong> will be the content Octopress uses to create those pages.</p>

<p>Now, anytime you need to <strong>backup work-in-progress</strong> source changes or after you you do a <strong>rake deploy</strong> you can just do this:
<code>
pushd source; git commit --all --message="Blog updated"; git push; popd
</code>
I&rsquo;ll be including this in the Github Page deploy plugin in the future so everytime I publish (deploy) I will also get a matching commit to the source branch&hellip;. But that and the other items on the Todo list will have to wait till later&hellip; ;-)</p>

<ul>
<li>Pow is a zero-config Rack server for Mac OS X : <a href="http://get.pow.cx/media/screencast.mov">Watch Me</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
